# Custom PostgreSQL Configuration for Stateless Mind
# This file is mounted directly into the primary container.

# --- Connection Settings ---
listen_addresses = '*'

# --- Replication Settings ---
wal_level = replica
archive_mode = on
# Archive WAL files to a subdirectory within the main PGDATA volume.
# This avoids host permission issues with rootless Docker.
archive_command = 'cp %p /var/lib/postgresql/data/wal-archive/%f'
max_wal_senders = 10
hot_standby = on

# Create a replication slot for the replica to prevent WAL file removal
# before the replica has consumed them.
max_replication_slots = 5